{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/christofferwallman/Desktop/Utveckling/NORAV1.2/src/app/api/admin/leads/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { createClient } from '@supabase/supabase-js';\n\n// Initiera Supabase-klienten\nconst supabaseUrl = process.env.SUPABASE_URL!;\nconst supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\nconst supabase = createClient(supabaseUrl, supabaseKey);\n\nexport async function GET(req: Request) {\n  try {\n    const { searchParams } = new URL(req.url);\n    const companyId = searchParams.get('companyId');\n\n    let query = supabase\n      .from('leads')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    // Om companyId skickas med, filtrera p√• det (bra om man har flera kunder)\n    if (companyId) {\n      query = query.eq('company_id', companyId);\n    }\n\n    const { data: leads, error } = await query;\n\n    if (error) {\n      throw error;\n    }\n\n    return NextResponse.json({ leads });\n  } catch (error: any) {\n    console.error('Error fetching leads:', error);\n    return NextResponse.json(\n      { error: 'Failed to fetch leads' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,6BAA6B;AAC7B,MAAM,cAAc,QAAQ,GAAG,CAAC,YAAY;AAC5C,MAAM,cAAc,QAAQ,GAAG,CAAC,yBAAyB;AACzD,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa;AAEpC,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,YAAY,aAAa,GAAG,CAAC;QAEnC,IAAI,QAAQ,SACT,IAAI,CAAC,SACL,MAAM,CAAC,KACP,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,0EAA0E;QAC1E,IAAI,WAAW;YACb,QAAQ,MAAM,EAAE,CAAC,cAAc;QACjC;QAEA,MAAM,EAAE,MAAM,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM;QAErC,IAAI,OAAO;YACT,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAM;IACnC,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}