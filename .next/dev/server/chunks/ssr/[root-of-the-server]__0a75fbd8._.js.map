{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/christofferwallman/Desktop/Utveckling/NORAV1.2/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport { Mail, AlertCircle, ArrowLeft, RefreshCw, CheckCircle } from 'lucide-react';\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\n  const [needsVerification, setNeedsVerification] = useState(false);\n  \n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const verified = searchParams.get('verified');\n  const fromSignup = searchParams.get('from_signup');\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setErrorMsg(null);\n\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n\n    if (error) {\n      // Check specifically for \"Email not confirmed\" error\n      if (error.message.includes(\"Email not confirmed\")) {\n        setNeedsVerification(true);\n      } else {\n        setErrorMsg(error.message === \"Invalid login credentials\" \n          ? \"Fel e-post eller lösenord.\" \n          : error.message);\n      }\n      setLoading(false);\n    } else {\n      router.push('/dashboard');\n    }\n  };\n\n  if (needsVerification) {\n    return (\n      <div className=\"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4\">\n        <Link href=\"/\" className=\"mb-8 text-3xl font-bold tracking-tight text-slate-900\">\n          NORA<span className=\"text-violet-600\">.ai</span>\n        </Link>\n\n        <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden\">\n          <div className=\"p-8 text-center\">\n            <div className=\"w-16 h-16 bg-violet-100 text-violet-600 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <Mail className=\"w-8 h-8\" />\n            </div>\n            \n            <h2 className=\"text-2xl font-bold text-slate-900 mb-3\">Verifiera din e-post</h2>\n            \n            <p className=\"text-slate-600 mb-6 leading-relaxed\">\n              Vi har skickat en verifieringslänk till <strong>{email}</strong>. \n              Du måste klicka på den för att aktivera ditt konto och logga in.\n            </p>\n\n            <div className=\"bg-slate-50 rounded-xl p-4 text-left text-sm text-slate-600 mb-8 border border-slate-100\">\n              <p className=\"font-semibold text-slate-900 mb-2 flex items-center gap-2\">\n                <AlertCircle className=\"w-4 h-4\" />\n                Hittar du inte mailet?\n              </p>\n              <ul className=\"list-disc list-inside space-y-1 ml-1\">\n                <li>Kontrollera din skräppost/spam-mapp</li>\n                <li>Vänta några minuter, det kan ta en stund</li>\n                <li>Kontrollera att du stavade rätt på e-postadressen</li>\n              </ul>\n            </div>\n\n            <button\n              onClick={() => setNeedsVerification(false)}\n              className=\"w-full py-3 bg-white border border-slate-200 text-slate-700 font-medium rounded-lg hover:bg-slate-50 hover:text-slate-900 transition-colors flex items-center justify-center gap-2\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              Tillbaka till inloggning\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4\">\n      <Link href=\"/\" className=\"mb-8 text-3xl font-bold tracking-tight text-slate-900\">\n        NORA<span className=\"text-violet-600\">.ai</span>\n      </Link>\n\n      <div className=\"w-full max-w-md bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden\">\n        <div className=\"p-8\">\n          <h2 className=\"text-2xl font-bold text-slate-900 mb-6\">Välkommen tillbaka</h2>\n          \n          {verified && (\n            <div className=\"mb-6 p-4 bg-green-50 border border-green-100 text-green-700 text-sm rounded-lg flex items-start gap-3 animate-in fade-in slide-in-from-top-1\">\n              <CheckCircle className=\"w-5 h-5 shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"font-semibold\">E-mail bekräftad!</p>\n                <p>Du kan nu logga in med dina uppgifter.</p>\n              </div>\n            </div>\n          )}\n\n          {errorMsg && (\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-100 text-red-600 text-sm rounded-lg flex items-start gap-3\">\n              <AlertCircle className=\"w-5 h-5 shrink-0 mt-0.5\" />\n              <span>{errorMsg}</span>\n            </div>\n          )}\n          \n          <form onSubmit={handleLogin} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\">E-post</label>\n              <input\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:outline-none\"\n                placeholder=\"namn@företag.se\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\">Lösenord</label>\n              <input\n                type=\"password\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:outline-none\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full py-3 bg-violet-600 text-white font-medium rounded-lg hover:bg-violet-700 transition-colors\"\n            >\n              {loading ? 'Loggar in...' : 'Logga in'}\n            </button>\n          </form>\n        </div>\n        \n        <div className=\"bg-slate-50 p-4 text-center text-sm text-slate-500 border-t border-slate-100\">\n          Inget konto än? <Link href=\"/signup\" className=\"text-violet-600 font-medium hover:underline\">Registrera dig</Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}