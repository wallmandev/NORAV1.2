{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/christofferwallman/Desktop/Utveckling/NORAV1.2/src/app/dashboard/leads/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from 'react';\nimport { createClient } from '@supabase/supabase-js';\nimport { Mail, Phone, Calendar, MessageSquare, ChevronDown, Archive } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\n// Setup Supabase client\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n);\n\ninterface Lead {\n  id: number;\n  company_id: string;\n  email: string | null;\n  phone: string | null;\n  name: string | null;\n  message: string | null;\n  created_at: string;\n}\n\nexport default function LeadsPage() {\n  const [leads, setLeads] = useState<Lead[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState<any>(null);\n\n  useEffect(() => {\n    const getUserAndLeads = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      setUser(user);\n      if (user) {\n        fetchLeads(user.id);\n      } else {\n        setIsLoading(false);\n      }\n    };\n    getUserAndLeads();\n  }, []);\n\n  const fetchLeads = async (userId: string) => {\n    const { data, error } = await supabase\n      .from('leads')\n      .select('*')\n      .eq('company_id', userId)\n      .order('created_at', { ascending: false });\n\n    if (!error && data) {\n      setLeads(data);\n    }\n    setIsLoading(false);\n  };\n\n  if (isLoading) return <div className=\"p-8 text-slate-400\">Laddar leads...</div>;\n\n  return (\n    <div className=\"space-y-6\">\n      <header>\n        <h2 className=\"text-2xl font-bold text-slate-900\">Inkomna Leads</h2>\n        <p className=\"text-slate-500\">Personer som har chattat med NORA och lämnat uppgifter.</p>\n      </header>\n\n      <div className=\"grid gap-4\">\n        {leads.length === 0 ? (\n          <div className=\"bg-white rounded-xl p-12 text-center border border-slate-200\">\n            <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400\">\n              <MessageSquare className=\"w-8 h-8\" />\n            </div>\n            <h3 className=\"text-lg font-medium text-slate-900\">Inga leads än</h3>\n            <p className=\"text-slate-500 max-w-sm mx-auto mt-2\">\n              När besökare pratar med NORA och lämnar sina kontaktuppgifter kommer de att dyka upp här.\n            </p>\n          </div>\n        ) : (\n          leads.map((lead, idx) => (\n            <motion.div \n              key={lead.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: idx * 0.05 }}\n              className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex flex-col md:flex-row gap-6\">\n                \n                {/* Contact Info */}\n                <div className=\"md:w-1/3 space-y-3\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 rounded-full bg-violet-100 flex items-center justify-center text-violet-600 font-bold\">\n                      {(lead.name || lead.email || '?')[0].toUpperCase()}\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-slate-900\">{lead.name || 'Okänd besökare'}</h4>\n                      <p className=\"text-xs text-slate-500 flex items-center gap-1\">\n                        <Calendar className=\"w-3 h-3\" />\n                        {new Date(lead.created_at).toLocaleString('sv-SE')}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2 pt-2\">\n                    {lead.email && (\n                      <div className=\"flex items-center gap-2 text-sm text-slate-600\">\n                        <Mail className=\"w-4 h-4 text-slate-400\" />\n                        <a href={`mailto:${lead.email}`} className=\"hover:text-violet-600\">{lead.email}</a>\n                      </div>\n                    )}\n                    {lead.phone && (\n                      <div className=\"flex items-center gap-2 text-sm text-slate-600\">\n                        <Phone className=\"w-4 h-4 text-slate-400\" />\n                        <a href={`tel:${lead.phone}`} className=\"hover:text-violet-600\">{lead.phone}</a>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Message / Context */}\n                <div className=\"flex-1 bg-slate-50 rounded-lg p-4 border border-slate-100\">\n                  <p className=\"text-sm text-slate-700 whitespace-pre-wrap leading-relaxed\">\n                    <span className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block\">Meddelande / Kontext</span>\n                    {lead.message ? `\"${lead.message}\"` : <i className=\"text-slate-400\">Inget meddelande sparat...</i>}\n                  </p>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex flex-col justify-center border-l border-slate-100 pl-6 gap-2\">\n                  <button className=\"px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:text-slate-900 transition-colors\">\n                    Markera som hanterad\n                  </button>\n                  <button className=\"px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center justify-center gap-2\">\n                    <Archive className=\"w-4 h-4\" /> Arkivera\n                  </button>\n                </div>\n\n              </div>\n            </motion.div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}